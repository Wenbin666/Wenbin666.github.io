---
title: Trance32(劳特巴赫)基本使用
date: 2022-06-22 20:24:34
tags: trace32
categories:  
  - Debug Tools
---

# Trance32(劳特巴赫)基本使用

# 1. Trace32简介
Trace32是一款由德国Lauterbach公司开发的调试和分析工具，主要用于嵌入式系统的开发与测试。它支持多种处理器架构，包括ARM、RISC-V、PowerPC、MIPS等，广泛应用于嵌入式软件的开发和调试过程中。
Trace32提供了丰富的功能，包括但不限于：
* 实时调试：支持硬件和软件调试，可以在目标硬件上进行实时调试
* 性能分析：提供性能分析工具，帮助开发者优化代码性能
* 追踪和记录：能够记录代码执行过程中的各种信息，帮助开发者分析问题
* 验证与测试：支持自动化测试和验证，提升软件质量
* 多种接口支持：可以通过多种接口（如JTAG、SWD等）连接到目标硬件
* 更多详细细节可以参考：[官方手册](https://repo.lauterbach.com/manual.html)

# 2. 硬件设备与软件界面
## 2.1 硬件图
![](image.png)
硬件如上图，通过USB与PC相连，JTAG接口连接要调试的Target 目标板即可。
![](image-2.png)

## 2.2 软件
### 2.2.1 软件安装
根据PC系统，下载对应的安装包，傻瓜式安装即可。
### 2.2.2 软件界面
安装完成后，可以选中TRACE32 ICD Arm USB, 打开IDE，打开界面如下图：
![](image-1.png)

# 3. 调试
Trace32可以通过调试窗口、命令执行和脚本三种方式进行调试。
# 3.1 调试窗口
# 3.1.1 List Source
常用：View->List Source 显示源码
![](image-3.png)
或点击最上方快捷按钮：
![](image-4.png)

# 3.1.2 显示函数
View->Symbols-> Browse Functions
![](image-5.png)
窗口调试方式：整体结构较为清晰，与DS5类似，可以设置断点、单步调试、查看寄存器值等，此处不再赘述。

## 3.2 调试命令
可以通过手动输入或者鼠标点击等方式来键入命令，命令较多，此处以个别命令为例进行说明：

**命令层次**
Trace32 的命令通常是分层结构的，主要由以下几个部分组成：
主命令：表示主要操作的命令。这通常是大写形式（如 SYStem、Data、CPU 等）。
子命令：主命令下的具体操作。例如，在 SYStem 下，可以有 CONFIG、RESET 等。
参数：对命令执行过程中的具体操作进行更多的指定。这些参数可以是需要的值、路径或其他选项。
一般来说，Trace32 的命令格式如下所示：
```bash
<主命令>.<子命令> <参数1> <参数2> ... <参数N>
```
例1：
```bash
#命令结构
System.CPU CortexA53  #指明系统CPU类型为CortexA53
```
例2：
```bash
SYStem.CONFIG.DAPIRPOST 0
```
SYStem：System命令集合代表整个系统的配置和管理
CONFIG：这是一个子命令，用于配置系统的参数
DAPIRPOST：这个参数是具体要配置的选项: DAPIRPOST值设置为 0 通常表示禁用某种特定的后处理操作, 防止在某些事件发生后（例如设备复位或重新启动）执行特定的处理步骤。这样可以有助于在调试时控制行为，避免因后处理影响到调试结果。

例3：
```bash
data.load.elf Y:\Myfile\App.elf /nocode
```
data.load.elf：加载 ELF 文件的命令，/nocode 的目的：只想加载数据或符号信息而不关心代码段时，可以使用 /nocode 选项
**总结**：
Trace32 的命令结构清晰，层次分明，使得开发者能够方便地进行调试配置和操作。通过组合主命令、子命令和参数，用户可以高效地控制调试会话，并进行实时调试和数据分析。

## 3.2 脚本
Trace32 的脚本功能允许用户通过编写脚本来自动化测试、调试和其他开发任务。
这种脚本通常被称为 CMM（Command Macro Module），是一种专为 Trace32 设计的高级命令语言。
也可以理解为有逻辑的命令组合。

# 4. 总结
Trace32提供全面的调试和跟踪功能，支持多种处理器架构（如ARM、MIPS、PowerPC等）。
它的功能模块包括实时操作系统分析、复杂数据分析等，适合大型项目和复杂系统。
本文只是简单的介绍了下基本使用，更多细节可以通过官网说明文档获取详细说明。